<Window x:Class="PortChecker.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:PortChecker"
        mc:Ignorable="d"
        Title="MainWindow" Height="450" Width="800" FontSize='22' 
				WindowState='Maximized'>
    <Grid>
        <TabControl>
            <TabItem Header='List Ports'>
                <Grid Margin="16">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="2*"/>
                    </Grid.RowDefinitions>

                    <StackPanel Orientation="Horizontal" Grid.Row="0">
                        <TextBlock Text="Protocol:" VerticalAlignment="Center"/>
                        <ComboBox x:Name="ProtocolFilterCombo" Width="180" SelectionChanged="ProtocolFilterCombo_SelectionChanged" Margin="12,0,0,0">
                            <ComboBoxItem Content="All" Tag="All"/>
                            <ComboBoxItem Content="TCP" Tag="Tcp"/>
                            <ComboBoxItem Content="UDP" Tag="Udp"/>
                        </ComboBox>
                        <CheckBox x:Name="IncludeConnectionsCheckbox" Content="Include TCP Connections" VerticalAlignment="Center" Checked="IncludeConnectionsCheckbox_Changed" Unchecked="IncludeConnectionsCheckbox_Changed" Margin="12,0,0,0"/>
                        <Button x:Name="RefreshButton" Content="Refresh" Width="140" Click="RefreshButton_Click" Margin="12,0,0,0"/>
                    </StackPanel>

                    <GroupBox Grid.Row="1" Header="Listening Ports" Margin="0,12,0,0">
                        <DataGrid x:Name="ListenersGrid" AutoGenerateColumns="False" IsReadOnly="True" SelectionMode="Single">
                            <DataGrid.Columns>
                                <DataGridTextColumn Header="Protocol" Binding="{Binding Protocol}" Width="120"/>
                                <DataGridTextColumn Header="Address" Binding="{Binding Address}" Width="*"/>
                                <DataGridTextColumn Header="Port" Binding="{Binding Port}" Width="120"/>
                            </DataGrid.Columns>
                        </DataGrid>
                    </GroupBox>

                    <TextBlock Grid.Row="2" Text="Active TCP Connections" Margin="0,16,0,4" Visibility="Collapsed" x:Name="ConnectionsHeader"/>

                    <DataGrid Grid.Row="3" x:Name="ConnectionsGrid" AutoGenerateColumns="False" IsReadOnly="True" Visibility="Collapsed">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Local" Binding="{Binding Local}" Width="*"/>
                            <DataGridTextColumn Header="Remote" Binding="{Binding Remote}" Width="*"/>
                            <DataGridTextColumn Header="State" Binding="{Binding State}" Width="180"/>
                        </DataGrid.Columns>
                    </DataGrid>
                </Grid>
            </TabItem>
            <TabItem Header='Check port'>
                <Grid Margin="16">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <StackPanel Orientation="Horizontal" Grid.Row="0" VerticalAlignment="Center">
                        <TextBlock Text="Port:" Margin="0,0,8,0"/>
                        <TextBox x:Name="PortTextBox" Width="120" Text="5000"/>
                    </StackPanel>

                    <StackPanel Orientation="Horizontal" Grid.Row="1" VerticalAlignment="Center" Margin="0,16,0,0">
                        <TextBlock Text="Address:" Margin="0,0,8,0"/>
                        <ComboBox x:Name="AddressCombo" Width="280" SelectedIndex="0">
                            <ComboBoxItem Content="Loopback (127.0.0.1)" Tag="Loopback"/>
                            <ComboBoxItem Content="Any (0.0.0.0)" Tag="Any"/>
                            <ComboBoxItem Content="IPv6 Loopback (::1)" Tag="IPv6Loopback"/>
                            <ComboBoxItem Content="IPv6 Any (::)" Tag="IPv6Any"/>
                        </ComboBox>
                    </StackPanel>

                    <StackPanel Orientation="Horizontal" Grid.Row="2" Margin="0,16,0,0">
                        <Button x:Name="CheckButton" Content="Check Port" Width="160" Click="CheckButton_Click"/>
                    </StackPanel>

                    <Border x:Name="ResultBorder" Grid.Row="3" Margin="0,24,0,0" Padding="12" BorderThickness="1" CornerRadius="4" BorderBrush="Gray">
                        <TextBlock x:Name="ResultText" Text="Enter a port and click Check."/>
                    </Border>
                </Grid>
            </TabItem>
        </TabControl>
    </Grid>
</Window>
